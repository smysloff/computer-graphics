
<!--- file: triangle rasterization --->

# Лекция №5: "Растеризация треугольников. Алгоритм scanline"

### Почему треугольники?

Треугольник — минимальный многоугольник. Любую сложную модель можно разбить на треугольники. Это основа всего 3D!

### Основная идея алгоритма:

Мы не будем просто рисовать три линии. Мы найдем все пиксели внутри треугольника и закрасим их.

## Шаги алгоритма:

* Сортируем вершины по `Y`.

  * Пусть `v0.y <= v1.y <= v2.y`. Это разделит треугольник на два участка: верхний и нижний.

* Обрабатываем два участка:

  * Верхний участок (от `v0` до `v2` через `v1`): Здесь два ребра — левое и правое.

  * Нижний участок (от `v1` до `v2`): Здесь тоже два ребра — левое и правое.

* Интерполяция по ребрам:

  * Для каждого сканирующего `y`-уровня мы вычисляем `x`-координаты на левом и правом ребрах. Это даст нам начало и конец горизонтальной линии для закрашивания.

  * Закрашиваем сканирующие строки:
    * Для каждого `y` от `y_min` до `y_max` рисуем горизонтальную линию между `x_left` и `x_right`.

### Как вычислять `x` на ребрах?

Используем линейную интерполяцию!

Для ребра между `v0(x0,y0)` и `v1(x1,y1)` на текущем `y`:

`x = x0 + ( (y - y0) * (x1 - x0) ) / (y1 - y0)`

Важный нюанс:

Нужно аккуратно обрабатывать деление на ноль (горизонтальные ребра) и быть внимательным к точности.


## Задача для реализации:

* Реализуй метод `fillTriangle(x0, y0, x1, y1, x2, y2)` в нашем классе `GC`.

  * Вспомогательные функции: Тебе может понадобиться функция для сортировки вершин по `Y`.

  * Интерполяция: Напиши функцию, которая для данного ребра и `y` вернет `x`.

  * Сканирование: Пройди по всем `y` между верхней и нижней вершиной, вычисли `x` для левого и правого ребра, и используй `drawStraightLine`.
